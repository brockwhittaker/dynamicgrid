function createNode(t,e,n,i,r,o,a){var l=document.createElement(t);l.setAttribute("class",e)||!1,null!==n&&(l.id=n||!1),null!==e&&(l.setAttribute("class",e)||!1),l.style.height=o+"px",l.style.width=a+"px",l.setAttribute("src",i),r.appendChild(l)}function generateContainerList(){var t=obj.photoContainerElem.querySelectorAll("img");containerList=[];for(var e=0;e<t.length;e++)containerList[e]=[t[e].naturalWidth,t[e].naturalHeight,t[e].src];return containerList}function getRatios(t){for(var e=[],n=0;n<t.length;n++)ratio=t[n][0]/t[n][1],e[n]=ratio;return e}function groupImages(t,e){for(var n=[[]],i=[],r=[],o=0,a=0,l=0;l<t.length;l++)o+t[l]<e?(n[a].push(l),o+=t[l]):(o=0,a++,n[a]=[],n[a].push(l),o+=t[l]),r[a]=o,i[l]=a;return[n,r,i]}function findRowHeight(t,e,n,i){for(var r=[],o=0;o<t[1].length;o++)r[o]=(e-n)/t[1][o]>i?i:(e-n*t[0][o].length)/t[1][o];return r}function printImages(t,e,n,i,r,o){var a=[];o.photoContainerElem.innerHTML="";for(var l=0;l<t.length;l++)createNode("img","photo",null,t[l][2],o.photoContainerElem,e[n[2][l]],e[n[2][l]]*i[l]),a[l]={height:e[n[2][l]],width:i[l]*e[n[2][l]]};return a}function createGrid(t){{var e=generateContainerList(),n=getRatios(e),i=groupImages(n,t.maxWidthHeightRatio),r=findRowHeight(i,t.container.width,t.container.margin,t.container.width/t.minWidthHeightRatio);printImages(e,r,i,n,null,t)}t.photoContainerElem.style.visibility="visible"}