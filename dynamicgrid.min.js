function generateContainerList(){var t=obj.photoContainerElem.querySelectorAll("img");containerList=[];for(var n=0;n<t.length;n++)containerList[n]=[t[n].naturalWidth,t[n].naturalHeight,t[n].src];return containerList}function getRatios(t){for(var n=[],i=0;i<t.length;i++)ratio=t[i][0]/t[i][1],n[i]=ratio;return n}function groupImages(t,n){for(var i=[[]],e=[],r=[],o=0,a=0,h=0;h<t.length;h++)o+t[h]<n?(i[a].push(h),o+=t[h]):(o=0,a++,i[a]=[],i[a].push(h),o+=t[h]),r[a]=o,e[h]=a;return[i,r,e]}function findRowHeight(t,n,i,e){for(var r=[],o=0;o<t[1].length;o++)(n-i)/t[1][o]>e?r[o]=e:r[o]=(n-i*t[0][o].length)/t[1][o];return r}function printImages(t,n,i,e,r){var o=[];obj.photoContainerElem.innerHTML="";for(var a=0;a<t.length;a++)obj.photoContainerElem.innerHTML+="<img class='photo' src="+t[a][2]+" style='height:"+n[i[2][a]]+"px;width:"+e[a]*n[i[2][a]]+"px'></div>",o[a]={height:n[i[2][a]],width:e[a]*n[i[2][a]]};return o}function createGrid(t){{var n=generateContainerList(),i=getRatios(n),e=groupImages(i,t.maxWidthHeightRatio),r=findRowHeight(e,t.container.width,t.container.margin,t.container.width/t.minWidthHeightRatio);printImages(n,r,e,i,null)}t.photoContainerElem.style.visibility="visible"}