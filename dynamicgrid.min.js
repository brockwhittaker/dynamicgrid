function createNode(t,e,n,i,r,o,a){var l=document.createElement(t);l.setAttribute("class",e)||!1,null!==n&&(l.id=n||!1),null!==e&&(l.setAttribute("class",e)||!1),l.style.height=o+"px",l.style.width=a+"px",l.setAttribute("src",i),r.appendChild(l)}function generateContainerList(){var t=obj.photoContainerElem.querySelectorAll("img");containerList=[];for(var e=0;e<t.length;e++)containerList[e]=[t[e].naturalWidth,t[e].naturalHeight,t[e].src];return containerList}function getRatios(t){for(var e=[],n=0;n<t.length;n++)ratio=t[n][0]/t[n][1],e[n]=ratio;return e}function groupImages(t,e){for(var n=[[]],i=[],r=[],o=0,a=0,l=0;l<t.length;l++)o+t[l]<e?(n[a].push(l),o+=t[l]):(o=0,a++,n[a]=[],n[a].push(l),o+=t[l]),r[a]=o,i[l]=a;return[n,r,i]}function findRowHeight(t,e,n,i){for(var r=[],o=0;o<t[1].length;o++)r[o]=(e-n)/t[1][o]>i?i:(e-n*t[0][o].length*2)/t[1][o];return r}function printImages(t,e,n,i,r){var o=[];r.photoContainerElem.innerHTML="";for(var a=0;a<t.length;a++)createNode("img","photo",null,t[a][2],r.photoContainerElem,e[n[2][a]],e[n[2][a]]*i[a]),o[a]={height:e[n[2][a]],width:i[a]*e[n[2][a]]};return o}function createGrid(t){if(null!==t.containerList&&"undefined"!=typeof t.containerList)var e=t.containerList;else var e=generateContainerList();if(null!==t.container.width&&"undefined"!=typeof t.container.width)var n=t.container.width;else var n=t.photoContainerElem.offsetWidth;if(null!==t.container.margin&&"undefined"!=typeof t.container.margin)var i=t.container.margin;else var i=0;{var r=getRatios(e),o=groupImages(r,t.maxWidthHeightRatio),a=findRowHeight(o,n,i,n/t.minWidthHeightRatio);printImages(e,a,o,r,t)}t.photoContainerElem.style.visibility="visible"}